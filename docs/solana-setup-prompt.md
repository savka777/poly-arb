# Solana Setup Prompt

Copy-paste the following into Claude Code (or any AI agent) after pulling latest and running `npm install`:

---

Set up the Solana on-chain commitment system for this project. Do the following steps:

1. **Install the Solana CLI** by running:
```bash
sh -c "$(curl -sSfL https://release.anza.xyz/stable/install)"
```
Then add it to PATH for this session:
```bash
export PATH="$HOME/.local/share/solana/install/active_release/bin:$PATH"
```

2. **Verify it installed** by running:
```bash
solana --version
```

3. **Add the following three lines to the `.env` file** (create it from `.env.example` if it doesn't exist). Do NOT overwrite existing variables — append these:
```
SOLANA_ENABLED=true
SOLANA_RPC_URL=http://127.0.0.1:8899
SOLANA_KEYPAIR=2t6ueYMPjpQZ2YSUD4Qb1Kt8qeHgvcZ1w4eNi67Kk8ZQfRgDXcH4iHXE7wsmrBYR3gew2ujtyK8BmJcPy5sWkLih
```

4. **Test it works** by running:
```bash
solana-test-validator --quiet --reset &
sleep 3
SOLANA_ENABLED=true SOLANA_RPC_URL=http://127.0.0.1:8899 SOLANA_KEYPAIR=2t6ueYMPjpQZ2YSUD4Qb1Kt8qeHgvcZ1w4eNi67Kk8ZQfRgDXcH4iHXE7wsmrBYR3gew2ujtyK8BmJcPy5sWkLih npx tsx scripts/test-solana.ts
```
This should show all checks passing (✓). The on-chain test will fail because the keypair isn't funded on the local validator yet — that's fine, the offline tests are what matter.

5. **To run the full app with Solana**, just use:
```bash
npm run dev
```
This starts both the local Solana validator and Next.js automatically. Signals generated by the orchestrator will be committed to the local chain.

That's it. No real money is involved — this uses a local test blockchain.

---

## Shared team keypair

Public key: `A3846aD9h3FruCLmEMtRHGAcazr49aUK3Dhnu6Shuuch`

Everyone uses the same keypair so all commits come from the same "Darwin Capital" identity. This is a devnet/local key — no real funds.

## How it works

- Every time the AI pipeline generates a signal, it SHA-256 hashes the signal metadata and writes the hash to Solana as a memo transaction
- This creates a cryptographic timestamp proving the prediction existed before the market moved
- `GET /api/commitments` shows all committed signals with convergence tracking
- `POST /api/commitments/:signalId/reveal` publishes the full signal data on-chain for anyone to verify
- `npx tsx scripts/verify-commitment.ts <tx-signature>` independently reads the chain and compares against live Polymarket prices
